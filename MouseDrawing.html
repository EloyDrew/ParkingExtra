<!DOCTYPE html>
<html lang"en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content"width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/konva@8.3.2/konva.min.js"></script>
    <link rel="stylesheet" href="resetstyle.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <nav class="nav-main">
        <div class="btn-toggle-nav" onclick="toggleNav()"> </div>
        <ul>
            <li><a href='#'>Placeholder</a></li>
            <li><a href='#'>Placeholder</a></li>
            <li><a href='#'>Placeholder</a></li>
            <li><a href='#'>Placeholder</a></li>
            <li><a href='#'>Placeholder</a></li>
        </ul>
    </nav>

    <aside class="nav-sidebar">
        <ul>
            <li><span>Shape Information</span></li>
            <li><a href='#'>Shape Type:</a></li>
            <li><a href='#'>Fill Colour:</a></li>
            <li><a href='#'>Stroke Colour:</a></li>
            <li><a href='#'>X/Y/Rotation</a></li>
            <li><a href='#'>GPS Anchor</a></li>
            <li><a href='#'>Save</a></li>
        </ul>
    </aside>


    <input type="file" id="image_input" accept="image/png, image/jpg">

    <div id="display_image"></div>

    <script src="Input.js"></script>



    <div id="konva-holder"></div>

        <!-- snapping  -->
    
    <div id="container"></div> 
    <script>
        const log = console.log;
        //alignment code
        var width = window.innerWidth;
        var height = window.innerHeight;
        var GUIDELINE_OFFSET = 5;

        //Stage Canvas
        const stage = new Konva.Stage({
            height: 800,
            width: 900,
            container: "display_image",
        });

        //Add One Layer
        const layer = new Konva.Layer();
        stage.add(layer);

        let circle = null;
        //let rect = null;
        let isNowDrawing = false;

        stage.on("mousedown", mousedownHandler);
        stage.on("mousemove", mousemoveHandler);
        stage.on("mouseup", mouseupHandler);

        function mousedownHandler() {
            isNowDrawing = true;
            rect = new Konva.Rect({
            //circle = new Konva.Circle({
                x: stage.getPointerPosition().x,
                y: stage.getPointerPosition().y,
                //Squares
                width: 20,
                height: 50,

                //Circle
                radius: 20,
                fill: "lightblue",
                stroke: "blue",
<<<<<<< Updated upstream
                draggable: true,
=======
                //checking to ensure draggable works
                draggable: true,
               
>>>>>>> Stashed changes
            });
            layer.add(rect).batchDraw();
            //layer.add(circle).batchDraw();
        }

        function mouseupHandler() {
            isNowDrawing = false;
        }

        function mousemoveHandler() {

            if (!isNowDrawing) return false;
            //Circle
            //const rise = Math.pow(stage.getPointerPosition().y - circle.y(), 2);
            //const run = Math.pow(stage.getPointerPosition().x - circle.x(), 2);
            //const newRadius = Math.sqrt(rise + run);
            //circle.radius(newRadius);

            //Square
            const newWidth = stage.getPointerPosition().x - rect.x();
            const newHeight = stage.getPointerPosition().y - rect.y();
            rect.width(newWidth).height(newHeight);

            layer.batchDraw();
        }
       

    </script>

</body>
<script src="Sidebar.js">

</script>

</html>